(function (d3, topojson) {
  'use strict';

  const svg = d3.select('svg');

  const projection = d3.geoNaturalEarth1();
  const pathGenerator = d3.geoPath().projection(projection);

  const g = svg.append('g');

  g.append('path')
      .attr('class', 'sphere')
      .attr('d', pathGenerator({type: 'Sphere'}));


  svg.call(d3.zoom().on('zoom', () => {
    g.attr('transform', d3.event.transform);
  }));

  Promise.all([
    d3.tsv('https://unpkg.com/world-atlas@1.1.4/world/50m.tsv'),
    d3.json('https://unpkg.com/world-atlas@1.1.4/world/50m.json')
  ]).then(([tsvData, topoJSONdata]) => {
    const countryName = tsvData.reduce((accumulator, d) => {
      accumulator[d.iso_n3] = d.name;
      return accumulator;
    }, {});
    /*
    const countryName = {};
    tsvData.forEach(d => {
      countryName[d.iso_n3] = d.name;
    });
    */
    const countries = topojson.feature(topoJSONdata, topoJSONdata.objects.countries);
    g.selectAll('path').data(countries.features)
      .enter().append('path')
        .attr('class', 'country')
        .attr('d', pathGenerator)
      .append('title')
        .text(d => countryName[d.id]);
  });

}(d3, topojson));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbGVjdCwgXG4gIGpzb24sIFxuICB0c3YsIFxuICBnZW9QYXRoLCBcbiAgZ2VvTmF0dXJhbEVhcnRoMSwgXG4gIHpvb20sIFxuICBldmVudCBcbn0gXG4gIGZyb20gJ2QzJztcblxuaW1wb3J0IHsgZmVhdHVyZSB9IGZyb20gJ3RvcG9qc29uJztcblxuY29uc3Qgc3ZnID0gc2VsZWN0KCdzdmcnKTtcblxuY29uc3QgcHJvamVjdGlvbiA9IGdlb05hdHVyYWxFYXJ0aDEoKTtcbmNvbnN0IHBhdGhHZW5lcmF0b3IgPSBnZW9QYXRoKCkucHJvamVjdGlvbihwcm9qZWN0aW9uKTtcblxuY29uc3QgZyA9IHN2Zy5hcHBlbmQoJ2cnKTtcblxuZy5hcHBlbmQoJ3BhdGgnKVxuICAgIC5hdHRyKCdjbGFzcycsICdzcGhlcmUnKVxuICAgIC5hdHRyKCdkJywgcGF0aEdlbmVyYXRvcih7dHlwZTogJ1NwaGVyZSd9KSk7XG5cblxuc3ZnLmNhbGwoem9vbSgpLm9uKCd6b29tJywgKCkgPT4ge1xuICBnLmF0dHIoJ3RyYW5zZm9ybScsIGV2ZW50LnRyYW5zZm9ybSlcbn0pKTtcblxuUHJvbWlzZS5hbGwoW1xuICB0c3YoJ2h0dHBzOi8vdW5wa2cuY29tL3dvcmxkLWF0bGFzQDEuMS40L3dvcmxkLzUwbS50c3YnKSxcbiAganNvbignaHR0cHM6Ly91bnBrZy5jb20vd29ybGQtYXRsYXNAMS4xLjQvd29ybGQvNTBtLmpzb24nKVxuXSkudGhlbigoW3RzdkRhdGEsIHRvcG9KU09OZGF0YV0pID0+IHtcbiAgY29uc3QgY291bnRyeU5hbWUgPSB0c3ZEYXRhLnJlZHVjZSgoYWNjdW11bGF0b3IsIGQpID0+IHtcbiAgICBhY2N1bXVsYXRvcltkLmlzb19uM10gPSBkLm5hbWU7XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9LCB7fSk7XG4gIC8qXG4gIGNvbnN0IGNvdW50cnlOYW1lID0ge307XG4gIHRzdkRhdGEuZm9yRWFjaChkID0+IHtcbiAgICBjb3VudHJ5TmFtZVtkLmlzb19uM10gPSBkLm5hbWU7XG4gIH0pO1xuICAqL1xuICBjb25zdCBjb3VudHJpZXMgPSBmZWF0dXJlKHRvcG9KU09OZGF0YSwgdG9wb0pTT05kYXRhLm9iamVjdHMuY291bnRyaWVzKTtcbiAgZy5zZWxlY3RBbGwoJ3BhdGgnKS5kYXRhKGNvdW50cmllcy5mZWF0dXJlcylcbiAgICAuZW50ZXIoKS5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NvdW50cnknKVxuICAgICAgLmF0dHIoJ2QnLCBwYXRoR2VuZXJhdG9yKVxuICAgIC5hcHBlbmQoJ3RpdGxlJylcbiAgICAgIC50ZXh0KGQgPT4gY291bnRyeU5hbWVbZC5pZF0pO1xufSk7XG5cblxuIl0sIm5hbWVzIjpbInNlbGVjdCIsImdlb05hdHVyYWxFYXJ0aDEiLCJnZW9QYXRoIiwiem9vbSIsImV2ZW50IiwidHN2IiwianNvbiIsImZlYXR1cmUiXSwibWFwcGluZ3MiOiI7OztFQVlBLE1BQU0sR0FBRyxHQUFHQSxTQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7O0VBRTFCLE1BQU0sVUFBVSxHQUFHQyxtQkFBZ0IsRUFBRSxDQUFDO0VBQ3RDLE1BQU0sYUFBYSxHQUFHQyxVQUFPLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7O0VBRXZELE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7O0VBRTFCLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO09BQ1gsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7T0FDdkIsSUFBSSxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7RUFHaEQsR0FBRyxDQUFDLElBQUksQ0FBQ0MsT0FBSSxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNO0lBQy9CLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFQyxRQUFLLENBQUMsU0FBUyxFQUFDO0dBQ3JDLENBQUMsQ0FBQyxDQUFDOztFQUVKLE9BQU8sQ0FBQyxHQUFHLENBQUM7SUFDVkMsTUFBRyxDQUFDLG1EQUFtRCxDQUFDO0lBQ3hEQyxPQUFJLENBQUMsb0RBQW9ELENBQUM7R0FDM0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxLQUFLO0lBQ25DLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLO01BQ3JELFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztNQUMvQixPQUFPLFdBQVcsQ0FBQztLQUNwQixFQUFFLEVBQUUsQ0FBQyxDQUFDOzs7Ozs7O0lBT1AsTUFBTSxTQUFTLEdBQUdDLGdCQUFPLENBQUMsWUFBWSxFQUFFLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDeEUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztPQUN6QyxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQ3BCLElBQUksQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDO1NBQ3hCLElBQUksQ0FBQyxHQUFHLEVBQUUsYUFBYSxDQUFDO09BQzFCLE1BQU0sQ0FBQyxPQUFPLENBQUM7U0FDYixJQUFJLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztHQUNuQyxDQUFDOzs7OyJ9